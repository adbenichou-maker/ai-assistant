
<div class="offcanvas offcanvas-end" tabindex="-1" id="chatsOffcanvas" aria-labelledby="chatsOffcanvasLabel">
  <div class="offcanvas-header">
    <h5 class="offcanvas-title" id="chatsOffcanvasLabel">Recent Chats</h5>
    <button type="button" class="btn-close text-reset" data-bs-dismiss="offcanvas" aria-label="Close"></button>
  </div>
  <div class="offcanvas-body">
    <% if user_signed_in? %>
      <div class="d-grid gap-2 mb-4">
        <%= link_to "Start a New Chat", new_chat_path, class: "btn btn-primary" %>
      </div>

      <ul class="list-group list-group-flush">
        <% chats = current_user.chats.order(updated_at: :desc) %>

        <% if chats.any? %>
          <% chats.each do |chat| %>
            <li class="list-group-item d-flex justify-content-between align-items-center px-0">
              <%= link_to chat_path(chat), class: "text-decoration-none text-truncate me-2" do %>

                <%= chat.title %>
              <% end %>

              <%# Display time since last update (e.g., "3 days ago") %>
              <span class="badge bg-secondary rounded-pill flex-shrink-0">
                <%= time_ago_in_words(chat.updated_at) %> ago
              </span>
            </li>
          <% end %>
        <% else %>
          <li class="list-group-item">You haven't started any chats yet!</li>
        <% end %>
      </ul>

    <% else %>
      <p class="text-center">Please sign in to view your chat history.</p>
    <% end %>
  </div>
</div>
