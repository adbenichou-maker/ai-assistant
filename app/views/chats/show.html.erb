<h1><%= @chat.title %></h1>

<div id="messages" class="mb-5">

  <% @chat.messages.each do |message| %>
    <% if message.role == "user" %>
      <div class="d-flex justify-content-end mb-3">
        <div class="bg-light px-3 py-2 rounded-pill">
          <%= message.content %>
        </div>
      </div>

    <% else %>
      <div class="d-flex justify-content-start mb-4">
        <div class="px-3 py-2 bg-white border rounded">
          <%= raw markdown(message.content) %>
        </div>
      </div>
    <% end %>
  <% end %>

</div>

<div id="new_message_container">
  <%= simple_form_for [@chat, @message] do |f| %>
    <%= f.input :content, label: "Your ingredients or question", placeholder: "Ex: I have chicken, tomatoes and rice. Give me a 20-minute recipe." %>
    <%= f.button :submit, "Generate recipes", class: "btn btn-primary" %>
  <% end %>
</div>
